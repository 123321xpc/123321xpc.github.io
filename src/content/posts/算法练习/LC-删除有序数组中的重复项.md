---
title: LC-删除有序数组中的重复项
published: 2024-07-06
description: ''
image: ''
tags: [LeetCode, 双指针]
category: '算法练习'
draft: false 
---





# 题目描述

给你一个有序数组 `nums` ，请你**原地**删除重复出现的元素，使得出现次数超过两次的元素**只出现两次** ，返回删除后数组的新长度。

不要使用额外的数组空间，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。



> 注：必须真的要操作数组，不能只返回长度！！！



# 示例

**示例 1：**

```
输入：nums = [1,1,1,2,2,3]
输出：5, nums = [1,1,2,2,3]
解释：函数应返回新长度 length = 5, 并且原数组的前五个元素被修改为 1, 1, 2, 2, 3。 不需要考虑数组中超出新长度后面的元素。
```

**示例 2：**

```
输入：nums = [0,0,1,1,1,1,2,3,3]
输出：7, nums = [0,0,1,1,2,3,3]
解释：函数应返回新长度 length = 7, 并且原数组的前七个元素被修改为 0, 0, 1, 1, 2, 3, 3。不需要考虑数组中超出新长度后面的元素。
```



# 数据范围

- `1 <= nums.length <= 3 * 104`
- `-104 <= nums[i] <= 104`
- `nums` **已按升序排列**





# 思路

+ 双指针。
+ 用一个计数器储存当前元素的个数，个数大于2则删除当前元素
+ 删除使用从右向左覆盖的方法。
+ 用一个变量`end`记录数组的长度，每删除一个元素，长度减1
+ 只要`num[i] != num[j]`，则说明开始统计一个新的数，此时`i, j`之间的数都是检查完毕的，故可以直接让`i`跳到`j`处。
+ 最后返回`end`即可



# 代码

```typescript
function removeDuplicates(nums: number[]): number {
    let cnt = 1, end = nums.length;
    let i = 0, j = 1;

    // 删除数组中元素
    function deleteElement(start: number): void {
        for (let k = start + 1; k < end; k++) {
            nums[k - 1] = nums[k];
        }
    }

    while (j < end) 
    {
        // 若当前元素与前一个元素相同，则计数器加1
        if(nums[i] === nums[j]){
            cnt++;
            // 若计数器大于2，则删除当前元素
            if(cnt > 2){
                deleteElement(j);
                cnt--;  // 删除元素后计数器减1
                end--;  // 数组长度减1
            }else{
                j++;    // 若不大于2，则继续比较下一个元素
                // 注意这里一定要是在else条件中，上面情况删除元素后，j自动指向下一个元素，不能j++
            }
            
        }else{  // 若当前元素与前一个元素不同，则计数器重置为1
            cnt = 1;
            i = j;  // 前面的数都检查完毕，i直接跳到当前元素
            j++;
        }
    }

    return end;
};
```

